window.ondomContentLoaded=function(){function e(e){return e>9?""+e:"0"+e}function t(e){if("[object Array]"!==toString.call(e))return!1;var t=0;for(i=0;i<e.length;i++)isNaN(e[i])||(t+=Number(e[i]));return t}function s(e,t){var s=0;return s=3==t?e/100*5:t>3&&t<=6?e/100*10:t>=7?e/100*25:0}function a(e){var t=0;return t=e>=50?0:e<50?e/100*5:e/100*5}function l(i){var l,o,d,c,n,r=JSON.parse(i),p=r.productsInCart,v="",m="",u="",x="",h="",f=[],b=[];for(console.log(p),l=0;l<p.length;l++){var g=p[l].p_id.toUpperCase(),y=p[l].p_name.toUpperCase(),T=p[l].p_variation.toUpperCase(),_=p[l].p_originalprice.toFixed(2),C=e(_),E=p[l].p_price.toFixed(2),I=e(E),w=p[l].p_selected_color.name,F=w.slice(1),L=w.charAt(0).toUpperCase()+F,Q=p[l].p_selected_size.code.toUpperCase(),S=p[l].p_style.toUpperCase(),U=p[l].c_currency.toUpperCase(),H=p[l].p_quantity;p[l].testVariable=p[l].p_quantity*p[l].p_price,f.push(E*H),b.push(H),v+='<div class="cart-items clearfix">                    <div class="col-xs-12 col-sm-4 col-md-2 text-center"><img src="assets/images/T'+(l+1)+'.jpg" width="151" height="154" alt="" /></div>                    <div class="col-xs-10 col-xs-offset-1  col-sm-offset-0 col-sm-8 col-md-10">                        <div class="row">                            <div class="col-md-6 item-short-desc">                                <h3 class="no-margin text-uppercase">'+T+" "+y+'</h3>                                <p class="no-margin">Style #: '+S+'</p>                                <p class="no-margin">Colour: '+L+'</p>                            </div>                            <div class="clearfix visible-xs visible-sm">                                <div class="col-xs-1">Size: </div>                                <div class="col-xs-1">'+Q+'</div>                            </div>                            <div class="clearfix visible-xs visible-sm item-qnty">                                <div class="col-xs-2">QTY: </div>                                <input type="text" class="text-center col-xs-2" id="Qty" value="'+H+'">                            </div>                            <div class="clearfix visible-xs visible-sm item-price"><div class="col-xs-5">',C!==I&&(v+="<sup>"+U+"</sup> <h3><s>"+C+"</s></h3><br>"),v+="<sup>"+U+"</sup> <h3>"+I+'</h3></div>                            </div>                            <div class="col-md-6 hidden-xs hidden-sm">                                <div class="row">                                    <div style="" class="col-md-4 text-center clearfix item-size">                                        <div class="visible-xs visible-sm col-xs-1">Size: </div>                                        <div class="col-xs-1 col-md-12">'+Q+'</div>                                    </div>                                    <div class="col-md-4 text-center clearfix item-qnty"><div class="visible-xs visible-sm col-xs-1">QTY: </div>                                        <input type="text" class="form-control text-center col-xs-1" id="Qty" value="'+H+'">                                    </div><div class="col-md-4 text-center clearfix col-xs-2 item-price">',C!==I&&(v+="<sup>"+U+"</sup> <h3><s>"+C+"</s></h3><br>"),v+="<sup>"+U+"</sup> <h3>"+I+'</h3></div>                                </div>                            </div>                        </div>                        <div class="row">                            <div class="col-md-6 col-lg-6">                                <div class="edit-items">                                    <a href="?p_id'+g+'" class="btn btn-default">Edit</a>                                    <a href="?p_id'+g+'" class="btn btn-default"><span></span>Remove</a>                                    <a href="?p_id'+g+'" class="btn btn-default">Save for later</a>                                </div>                            </div>                        </div>                    </div>                </div>'}o=t(f),formatedsubTotal=e(t(f).toFixed(2)),totalQnty=t(b),d=s(o,totalQnty),formateddiscount=e(s(o,totalQnty).toFixed(2)),n=a(o),formatedshipping=e(a(o).toFixed(2)),c=o-d+n,formatedestimatedTotal=e(c.toFixed(2)),u+="<sup>"+U+" </sup><h3>"+formatedsubTotal+"</h3>",x+="<h3>- </h3><sup> "+U+" </sup><h3>"+formateddiscount+"</h3>",h+="<sup>"+U+" </sup><h3>"+formatedestimatedTotal+"</h3>",m+=0===n?"FREE":"<sup>"+U+" </sup><h3>"+formatedshipping+"</h3>",document.getElementById("itemsInCart").innerHTML=v,document.getElementById("subTotal").innerHTML=u,document.getElementById("discountTotal").innerHTML=x,document.getElementById("shippingTotal").innerHTML=m,document.getElementById("estimatedTotal").innerHTML=h,totalItems=$(".cart-items").length,$(".total-items").html($("<div/>",{class:"total-items"}).html(totalItems+" items"))}var o=new XMLHttpRequest,d="assets/json/cart.json";o.onreadystatechange=function(){4==o.readyState&&l(o.responseText)},o.open("GET",d,!0),o.send()}();