window.onload=function(){function e(e){return e>9?""+e:"0"+e}function s(e){if("[object Array]"!==toString.call(e))return!1;var s=0;for(i=0;i<e.length;i++)isNaN(e[i])||(s+=Number(e[i]));return s}function t(e,s){var t=0;return t=3==s?e/100*5:s>3&&s<=6?e/100*10:s>=7?e/100*25:0}function c(e){var s=0;return s=e>=50?0:e<50?e/100*5:e/100*5}function a(i){var a,l,o,d,n,r=JSON.parse(i),p=r.productsInCart,v="",m="",u="",x="",h="",f=[],y=[];for(console.log(p),a=0;a<p.length;a++){var w=p[a].p_id.toUpperCase(),b=p[a].p_name.toUpperCase(),g=p[a].p_variation.toUpperCase(),T=p[a].p_originalprice.toFixed(2),_=e(T),C=p[a].p_price.toFixed(2),E=e(C),I=p[a].p_selected_color.name,F=I.slice(1),Q=I.charAt(0).toUpperCase()+F,S=p[a].p_selected_size.code.toUpperCase(),U=p[a].p_style.toUpperCase(),H=p[a].p_quantity;p[a].testVariable=p[a].p_quantity*p[a].p_price,f.push(C*H),y.push(H),window.currency=p[a].c_currency.toUpperCase(),v+='<div class="cart-items clearfix">                    <div class="col-xs-12 col-sm-4 col-md-2 text-center"><img src="assets/images/T'+(a+1)+'.jpg" width="151" height="154" alt="" /></div>                    <div class="col-xs-10 col-xs-offset-1  col-sm-offset-0 col-sm-8 col-md-10">                        <div class="row">                            <div class="col-md-6 item-short-desc">                                <h3 class="no-margin text-uppercase">'+g+" "+b+'</h3>                                <p class="no-margin">Style #: '+U+'</p>                                <p class="no-margin">Colour: '+Q+'</p>                            </div>                            <div class="clearfix visible-xs visible-sm">                                <div class="col-xs-1">Size: </div>                                <div class="col-xs-1">'+S+'</div>                            </div>                            <div class="clearfix visible-xs visible-sm item-qnty">                                <div class="col-xs-2">QTY: </div>                                <input type="text" class="text-center col-xs-2" id="Qty" value="'+H+'">                            </div>                            <div class="clearfix visible-xs visible-sm item-price"><div class="col-xs-5">',_!==E&&(v+="<sup>"+window.currency+"</sup> <h3><s>"+_+"</s></h3><br>"),v+="<sup>"+window.currency+"</sup> <h3>"+E+'</h3></div>                            </div>                            <div class="col-md-6 hidden-xs hidden-sm">                                <div class="row">                                    <div style="" class="col-md-4 text-center clearfix item-size">                                        <div class="visible-xs visible-sm col-xs-1">Size: </div>                                        <div class="col-xs-1 col-md-12">'+S+'</div>                                    </div>                                    <div class="col-md-4 text-center clearfix item-qnty"><div class="visible-xs visible-sm col-xs-1">QTY: </div>                                        <input type="text" class="form-control text-center col-xs-1" id="Qty" value="'+H+'">                                    </div><div class="col-md-4 text-center clearfix col-xs-2 item-price">',_!==E&&(v+="<sup>"+window.currency+"</sup> <h3><s>"+_+"</s></h3><br>"),v+="<sup>"+window.currency+"</sup> <h3>"+E+'</h3></div>                                </div>                            </div>                        </div>                        <div class="row">                            <div class="col-md-6 col-lg-6">                                <div class="edit-items">                                    <a href="?p_id'+w+'" class="btn btn-default">Edit</a>                                    <a href="?p_id'+w+'" class="btn btn-default"><span></span>Remove</a>                                    <a href="?p_id'+w+'" class="btn btn-default">Save for later</a>                                </div>                            </div>                        </div>                    </div>                </div>'}l=s(f),formatedsubTotal=e(s(f).toFixed(2)),totalQnty=s(y),o=t(l,totalQnty),formateddiscount=e(t(l,totalQnty).toFixed(2)),n=c(l),formatedshipping=e(c(l).toFixed(2)),d=l-o+n,formatedestimatedTotal=e(d.toFixed(2)),u+="<sup>"+window.currency+" </sup><h3>"+formatedsubTotal+"</h3>",x+="<h3>- </h3><sup> "+window.currency+" </sup><h3>"+formateddiscount+"</h3>",h+="<sup>"+window.currency+" </sup><h3>"+formatedestimatedTotal+"</h3>",m+=0===n?"FREE":"<sup>"+window.currency+" </sup><h3>"+formatedshipping+"</h3>",document.getElementById("itemsInCart").innerHTML=v,document.getElementById("subTotal").innerHTML=u,document.getElementById("discountTotal").innerHTML=x,document.getElementById("shippingTotal").innerHTML=m,document.getElementById("estimatedTotal").innerHTML=h,totalItems=$(".cart-items").length,$(".total-items").html($("<div/>",{class:"total-items"}).html(totalItems+" items"))}var l=new XMLHttpRequest,o="assets/json/cart.json";l.onreadystatechange=function(){4==l.readyState&&a(l.responseText)},l.open("GET",o,!0),l.send()}();